"use strict";(self.webpackChunkchg_training_resources=self.webpackChunkchg_training_resources||[]).push([[8482],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>u});var a=t(67294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,o=function(e,n){if(null==e)return{};var t,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=a.createContext({}),p=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},d=function(e){var n=p(e.components);return a.createElement(l.Provider,{value:n},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},h=a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),m=p(t),h=o,u=m["".concat(l,".").concat(h)]||m[h]||c[h]||i;return t?a.createElement(u,r(r({ref:n},d),{},{components:t})):a.createElement(u,r({ref:n},d))}));function u(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,r=new Array(i);r[0]=h;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s[m]="string"==typeof e?e:o,r[1]=s;for(var p=2;p<i;p++)r[p]=t[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,t)}h.displayName="MDXCreateElement"},53867:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>c,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var a=t(87462),o=(t(67294),t(3905));const i={sidebar_position:2},r="Setting up Conda",s={unversionedId:"prerequisites/CONDA",id:"prerequisites/CONDA",title:"Setting up Conda",description:"One of the easiest ways to set up your environment that works across platforms is to use conda.",source:"@site/docs/prerequisites/CONDA.md",sourceDirName:"prerequisites",slug:"/prerequisites/CONDA",permalink:"/chg-training-resources/prerequisites/CONDA",draft:!1,editUrl:"https://github.com/chg-training/chg-training-resources/edit/main/docs/prerequisites/CONDA.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"sidebar1",previous:{title:"Setting up a UNIX terminal",permalink:"/chg-training-resources/prerequisites/UNIX"},next:{title:"R and RStudio",permalink:"/chg-training-resources/prerequisites/R"}},l={},p=[{value:"Installing conda",id:"installing-conda",level:2},{value:"Activating and deactivating conda",id:"activating-and-deactivating-conda",level:3},{value:"Using conda to install software",id:"using-conda-to-install-software",level:3},{value:"Creating a new environment",id:"creating-a-new-environment",level:3},{value:"Adding bioconda",id:"adding-bioconda",level:3},{value:"How conda works - what even is an &#39;environment&#39;?",id:"how-conda-works---what-even-is-an-environment",level:2}],d={toc:p},m="wrapper";function c(e){let{components:n,...t}=e;return(0,o.kt)(m,(0,a.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"setting-up-conda"},"Setting up Conda"),(0,o.kt)("p",null,"One of the easiest ways to set up your environment that works across platforms is to use conda.\nConda creates 'virtual environments' that don't break the rest of your system, and uses a\ncomprehensive package manager. It has a dedicated ",(0,o.kt)("a",{parentName:"p",href:"https://bioconda.github.io"},"bioconda channel"),"\nthat makes it easy to install software for biomedical research."),(0,o.kt)("h2",{id:"installing-conda"},"Installing conda"),(0,o.kt)("p",null,"The recommended way is to install ",(0,o.kt)("a",{parentName:"p",href:"https://conda-forge.org/"},(0,o.kt)("inlineCode",{parentName:"a"},"miniforge"))," which is a minimal environment that lets you\ninstall the packages you want."),(0,o.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"Warning")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Due to licensing changes, we now recommend using ",(0,o.kt)("inlineCode",{parentName:"p"},"miniforge")," not ",(0,o.kt)("inlineCode",{parentName:"p"},"miniconda"),"."))),(0,o.kt)("p",null,"To get ",(0,o.kt)("inlineCode",{parentName:"p"},"miniforge"),", visit ","[releases page]","(",(0,o.kt)("a",{parentName:"p",href:"https://conda-forge.org/miniforge/#latest-release"},"https://conda-forge.org/miniforge/#latest-release")," and choose the appropriate version:"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"If you are on Mac OS X")," you almost certainly want the ",(0,o.kt)("inlineCode",{parentName:"p"},"arm64")," version.  (The exception is if you are on an older Mac that has Intel silicon, in which case choose the ",(0,o.kt)("inlineCode",{parentName:"p"},"x86_64")," version.)"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"If you are on Linux")," download the linux ",(0,o.kt)("inlineCode",{parentName:"p"},"x86_64")," version."),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"If you are on Windows"),", ",(0,o.kt)("strong",{parentName:"p"},"download the linux ",(0,o.kt)("inlineCode",{parentName:"strong"},"x86_64")," version anyway"),". This is because we will\ninstall it into the Linux subsystem for Windows."),(0,o.kt)("p",null,"The installer is a bash (",(0,o.kt)("inlineCode",{parentName:"p"},".sh"),") file which we'll have to run in the terminal to install. It will have been downloaded\ninto your 'Downloads' folder - let's change directory there and go and make sure it has downloaded:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"on ",(0,o.kt)("strong",{parentName:"li"},"Mac OS X"),":")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ cd Downloads\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"on ",(0,o.kt)("strong",{parentName:"li"},"Windows"),":")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ cd /mnt/c/Users/<username>/Downloads\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"on ",(0,o.kt)("strong",{parentName:"li"},"Linux"),": probably")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ cd Downloads\n")),(0,o.kt)("p",null,"You can check what's there by running ",(0,o.kt)("inlineCode",{parentName:"p"},"ls Mini*")," - you should see there's a file of the form\n",(0,o.kt)("inlineCode",{parentName:"p"},"Miniforge-<version>-<platform>.sh"),"."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Because this is an installer downloaded from the internet, you should check it's the\nreal thing before installing it.  Run ",(0,o.kt)("inlineCode",{parentName:"p"},"sha256sum <miniconda filename>")," (linux or Ubuntu for Windows) or ",(0,o.kt)("inlineCode",{parentName:"p"},"shasum -a 256 <miniconda filename>")," (Mac OS X) as described  and compare the output to the SHA256 has in the output table. If it's different, don't install!"),(0,o.kt)("p",{parentName:"div"},"See ",(0,o.kt)("a",{parentName:"p",href:"https://conda.io/projects/conda/en/latest/user-guide/install/download.html#cryptographic-hash-verification"},"this\npage"),"\nfor more information."))),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"To install"),", make sure you have ",(0,o.kt)("inlineCode",{parentName:"p"},"cd")," into the downloads folder as above, and then run the installer:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ bash ./Miniforge3-<version>-<platform>.sh\n")),(0,o.kt)("p",null,"(You should fill in the right filename, or use the ",(0,o.kt)("inlineCode",{parentName:"p"},"<tab>")," key to auto-fill.)"),(0,o.kt)("p",null,"You will be asked to accept the license and choose an install location. If in doubt, the defaults\ninstall to a folder called ",(0,o.kt)("inlineCode",{parentName:"p"},"miniforge3")," in your home directory, which is fine.  Say 'yes' when asked\nif you want to initialise the installer."),(0,o.kt)("h3",{id:"activating-and-deactivating-conda"},"Activating and deactivating conda"),(0,o.kt)("p",null,"If you read the blurb this command outputs, you'll see it says it is going to ",(0,o.kt)("strong",{parentName:"p"},"activate the conda environment by\ndefault on startup"),". You'll know whether conda is activated because it the current conda 'environment' will show up in\nyour command prompt.  The default one is called 'base' so your prompt will look like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"(base) <username>@<computer>:~$\n")),(0,o.kt)("p",null,"If it doesn't look like this, try activating it by typing ",(0,o.kt)("inlineCode",{parentName:"p"},"conda activate")," now."),(0,o.kt)("p",null,"You can then also ",(0,o.kt)("strong",{parentName:"p"},"deactivate the environment")," (going back to normal) with the ",(0,o.kt)("inlineCode",{parentName:"p"},"conda deactivate")," command"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ conda deactivate\n")),(0,o.kt)("p",null,"And you can reactivate it with - you guessed it!"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ conda activate\n")),(0,o.kt)("h3",{id:"using-conda-to-install-software"},"Using conda to install software"),(0,o.kt)("p",null,"Conda makes installing stuff easy.  The first thing it's good to have is a better (faster) version of ",(0,o.kt)("inlineCode",{parentName:"p"},"conda"),"\nitself, called ",(0,o.kt)("inlineCode",{parentName:"p"},"mamba"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ conda install mamba\n")),(0,o.kt)("p",null,"Type 'y' and press ","<","enter",">"," to install"),(0,o.kt)("p",null,"(You might find that ",(0,o.kt)("inlineCode",{parentName:"p"},"mamba")," is already installed, in which case you don't need to do anything here.)"),(0,o.kt)("h3",{id:"creating-a-new-environment"},"Creating a new environment"),(0,o.kt)("p",null,"Before installing anything else, let's use conda to create a new 'environment' to work in.  Let's call it ",(0,o.kt)("inlineCode",{parentName:"p"},"gms"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"$ conda create --name gms\n")),(0,o.kt)("p",null,"And then activate it with:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"$ conda activate gms\n")),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"This is the ",(0,o.kt)("strong",{parentName:"p"},"downside of using conda"),": you have to remember what environment you're in at any one time."),(0,o.kt)("p",{parentName:"div"},"The upside is that you get a flexible way to install bits of software that we'll need without affecting the rest of your\nsystem."))),(0,o.kt)("p",null,"Let's try using ",(0,o.kt)("inlineCode",{parentName:"p"},"conda")," / ",(0,o.kt)("inlineCode",{parentName:"p"},"mamba")," to install ",(0,o.kt)("a",{parentName:"p",href:"https://samtools.github.io"},(0,o.kt)("inlineCode",{parentName:"a"},"samtools")),", which is a workhorse tool for handling\nnext-generation sequencing data, into our ",(0,o.kt)("inlineCode",{parentName:"p"},"gms")," environment. While you ",(0,o.kt)("em",{parentName:"p"},"can")," download the source code and compile it yourself,\nconda makes this easy. You'll want a fairly recent version, so let's get version ",(0,o.kt)("inlineCode",{parentName:"p"},"1.15")," which is\navailable from the ",(0,o.kt)("a",{parentName:"p",href:"https://bioconda.github.io"},"bioconda")," channel:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ mamba install -c bioconda 'samtools>=1.15'\n")),(0,o.kt)("p",null,"or"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ conda install -c bioconda 'samtools>=1.15'\n")),(0,o.kt)("p",null,"You may have noticed we added ",(0,o.kt)("inlineCode",{parentName:"p"},"-c bioconda")," in the above command.  This is because the most up-to-date versions of\n",(0,o.kt)("inlineCode",{parentName:"p"},"samtools")," live in the ",(0,o.kt)("a",{parentName:"p",href:"https://bioconda.github.io"},"bioconda channel")," (rather than in conda-forge).  If you look at\nthe output you'll see that this is getting ",(0,o.kt)("inlineCode",{parentName:"p"},"htslib")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"samtools")," from bioconda, but also ",(0,o.kt)("inlineCode",{parentName:"p"},"libdeflate")," from conda-forge\n(and possibly other packages). Go ahead and install. Running samtools now gives you some output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ samtools\n\nProgram: samtools (Tools for alignments in the SAM format)\nVersion: 1.16.1 (using htslib 1.16)\n\nUsage:   samtools <command> [options]\n...\n")),(0,o.kt)("p",null,"Congratulations! You've just used conda to install some software into the ",(0,o.kt)("inlineCode",{parentName:"p"},"gms")," environment."),(0,o.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"Remember")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Remember that the newly-installed software is only present in the ",(0,o.kt)("inlineCode",{parentName:"p"},"gms")," environment."),(0,o.kt)("p",{parentName:"div"},"If your prompt doesn't say ",(0,o.kt)("inlineCode",{parentName:"p"},"(gms)")," at the start, the environment isn't activated and you won't be able to run the software.  Try it now:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"$ conda deactivate\n$ samtools\ncommand not found: samtools\n")),(0,o.kt)("p",{parentName:"div"},"To use this version of samtools, you must ",(0,o.kt)("strong",{parentName:"p"},"remember to activate the environment")," first:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"$ conda activate gms\n$ samtools\n")))),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Question")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Another useful program is ",(0,o.kt)("inlineCode",{parentName:"p"},"bcftools"),". Can you install that into your ",(0,o.kt)("inlineCode",{parentName:"p"},"gms")," environment as well?"))),(0,o.kt)("h3",{id:"adding-bioconda"},"Adding bioconda"),(0,o.kt)("p",null,"For biomedical work you will want to use both ",(0,o.kt)("inlineCode",{parentName:"p"},"bioconda")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"conda-forge")," a great deal. To avoid version issues it's\ntherefore best to go ahead and set these channels up permanently.  The ",(0,o.kt)("a",{parentName:"p",href:"https://bioconda.github.io"},"bioconda page"),"\nexplains how to do this, namely, run:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"conda config --add channels bioconda\nconda config --add channels conda-forge\nconda config --set channel_priority strict\n")),(0,o.kt)("p",null,'This bit of configuration says: "search conda-forge first, then bioconda, for packages".  This will help it find\nup-to-date versions of the software we need.'),(0,o.kt)("h2",{id:"how-conda-works---what-even-is-an-environment"},"How conda works - what even is an 'environment'?"),(0,o.kt)("p",null,"UNIX figures out how to find programs and other things using so-called 'environment variables'. You\ncan see them all using the ",(0,o.kt)("inlineCode",{parentName:"p"},"env")," command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ env\n")),(0,o.kt)("p",null,"When conda manages 'environments', all it is really doing is changing environment variables to point to its own copies\nof files."),(0,o.kt)("p",null,"For example the ",(0,o.kt)("inlineCode",{parentName:"p"},"HOME")," environment variable points at your home folder:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ echo ${HOME}\n/users/<username> (or similar)\n")),(0,o.kt)("p",null,"Let's go there now and see what's there:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ cd ${HOME}\n$ ls\n")),(0,o.kt)("p",null,"If you've followed the above, you should see that ",(0,o.kt)("inlineCode",{parentName:"p"},"conda")," has created a directory called ",(0,o.kt)("inlineCode",{parentName:"p"},"miniforge3"),"\nin there where it puts the things it installs. For example the base environment executable programs go in ",(0,o.kt)("inlineCode",{parentName:"p"},"miniforge3/bin"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ ls miniforge3/bin\n")),(0,o.kt)("p",null,"If you look there you will see (among many other things) the ",(0,o.kt)("inlineCode",{parentName:"p"},"mamba")," executable - because we just installed it."),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Note")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"You ",(0,o.kt)("strong",{parentName:"p"},"won't")," see the samtools command, because we installed it into the ",(0,o.kt)("inlineCode",{parentName:"p"},"gms")," environment.  Instead, that has been\nplaced in a folder specific to that environment:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"$ ls miniforge3/envs/gms/bin/\n")),(0,o.kt)("p",{parentName:"div"},"If you install anything else into that environment, that's where it will go."))),(0,o.kt)("p",null,"To make the environment work, when you activate conda it sets relevant environment variables to point to\nthis ",(0,o.kt)("inlineCode",{parentName:"p"},"gms")," folder. "),(0,o.kt)("p",null,"In particular when you ",(0,o.kt)("inlineCode",{parentName:"p"},"conda activate gms"),", conda adds this ",(0,o.kt)("inlineCode",{parentName:"p"},"bin")," directory to your ",(0,o.kt)("inlineCode",{parentName:"p"},"PATH")," environment variable.  The\nterminal uses to know where to look for programs. You can see what's happened by printing out the ",(0,o.kt)("inlineCode",{parentName:"p"},"PATH")," variable like this:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"$ echo ${PATH}\n")),(0,o.kt)("p",null,"You should see that the first entry is something like ",(0,o.kt)("inlineCode",{parentName:"p"},"/users/<username>/miniforge3/envs/gms/bin")," (followed by some\nother paths).  So if you type ",(0,o.kt)("inlineCode",{parentName:"p"},"samtools"),", the first place the terminal looks for ",(0,o.kt)("inlineCode",{parentName:"p"},"samtools")," is in that folder."),(0,o.kt)("p",null,"If you deactivate the conda environment, ",(0,o.kt)("inlineCode",{parentName:"p"},"PATH")," changes to remove that folder and samtools will no longer work:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ conda deactivate\n$ samtools\n\nCommand 'samtools' not found...\n")),(0,o.kt)("p",null,"However ",(0,o.kt)("inlineCode",{parentName:"p"},"samtools")," is still there on your filesystem - as it happens, you ",(0,o.kt)("em",{parentName:"p"},"can")," still run it by\nspecifying its full path:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"$ ./miniforge3/envs/gms/bin/samtools\n")),(0,o.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"Summary")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"In other words conda isn't doing anything magical here: it's just managing your environment variables for you.  In\nparticular it is installing programs into a specific folder and making sure the ",(0,o.kt)("inlineCode",{parentName:"p"},"PATH")," variable points at the right\nfolder.  This is basically how 'environments' work: they are systems of environment variables that tell the UNIX shell\nwhere to look for things."))))}c.isMDXComponent=!0}}]);